<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Data Analysis and Visualization in Python for Ecologists: Data Workflows and Automation</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/dc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/dc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/dc/favicon-16x16.png"><link rel="manifest" href="../favicons/dc/site.webmanifest"><link rel="mask-icon" href="../favicons/dc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav data"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="dc-logo" alt="Data Carpentry" src="../assets/images/data-logo.svg"></div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../06-loops-and-functions.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="../assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Data Analysis and Visualization in Python for Ecologists
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Data Analysis and Visualization in Python for Ecologists
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="CONTRIBUTORS.html">About Contributors</a></li><li><a class="dropdown-item" href="extra_challenges.html">Extra Challenges</a></li><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="jupyter_notebooks.html">Overview of Jupyter Notebooks</a></li><li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Analysis and Visualization in Python for Ecologists
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 45%" class="percentage">
    45%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 45%" aria-valuenow="45" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../06-loops-and-functions.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-before-we-start.html">1. Before we start</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-short-introduction-to-Python.html">2. Short Introduction to Programming in Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-starting-with-data.html">3. Starting With Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-index-slice-subset.html">4. Indexing, Slicing and Subsetting DataFrames in Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-data-types-and-format.html">5. Data Types and Formats</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="05-merging-data.html">6. Combining DataFrames with Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        7. Data Workflows and Automation
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#for-loops">For loops</a></li>
<li><a href="#automating-data-processing-using-for-loops">Automating data processing using For Loops</a></li>
<li><a href="#writing-unique-file-names">Writing Unique File Names</a></li>
<li><a href="#building-reusable-and-modular-code-with-functions">Building reusable and modular code with functions</a></li>
<li><a href="#if-statements">If Statements</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="07-visualization-ggplot-python.html">8. Making Plots With plotnine</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="08-putting-it-all-together.html">9. Data Ingest and Visualization - Matplotlib and Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="09-working-with-sql.html">10. Accessing SQLite Databases Using Python and Pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <li><a href="CONTRIBUTORS.html">About Contributors</a></li><li><a href="extra_challenges.html">Extra Challenges</a></li><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="jupyter_notebooks.html">Overview of Jupyter Notebooks</a></li><li><a class="dropdown-item" href="reference.html">Glossary</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/05-merging-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/05-merging-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Combining DataFrames
        </a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html" rel="next">
          Next: Making Plots With...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Data Workflows and Automation</h1>
        <p>Last updated on 2023-05-18 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/06-loops-and-functions.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Can I automate operations in Python?</li>
<li>What are functions and why should I use them?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe why for loops are used in Python.</li>
<li>Employ for loops to automate data analysis.</li>
<li>Write unique filenames in Python.</li>
<li>Build reusable code in Python.</li>
<li>Write functions using conditional statements (if, then, else).</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>So far, we’ve used Python and the pandas library to explore and
manipulate individual datasets by hand, much like we would do in a
spreadsheet. The beauty of using a programming language like Python,
though, comes from the ability to automate data processing through the
use of loops and functions.</p>
<section><h2 class="section-heading" id="for-loops">For loops<a class="anchor" aria-label="anchor" href="#for-loops"></a></h2>
<hr class="half-width"><p>Loops allow us to repeat a workflow (or series of actions) a given
number of times or while some condition is true. We would use a loop to
automatically process data that’s stored in multiple files (daily values
with one file per year, for example). Loops lighten our work load by
performing repeated tasks without our direct involvement and make it
less likely that we’ll introduce errors by making mistakes while
processing each file by hand.</p>
<p>Let’s write a simple for loop that simulates what a kid might see
during a visit to the zoo:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">print</span>(animals)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['lion', 'tiger', 'crocodile', 'vulture', 'hippo']</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    <span class="bu">print</span>(creature)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lion</span></span>
<span><span class="va">tiger</span></span>
<span><span class="va">crocodile</span></span>
<span><span class="va">vulture</span></span>
<span><span class="va">hippo</span></span></code></pre>
</div>
<p>The line defining the loop must start with <code>for</code> and end
with a colon, and the body of the loop must be indented.</p>
<p>In this example, <code>creature</code> is the loop variable that
takes the value of the next entry in <code>animals</code> every time the
loop goes around. We can call the loop variable anything we like. After
the loop finishes, the loop variable will still exist and will have the
value of the last entry in the collection:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The loop variable is now: '</span> <span class="op">+</span> creature)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The loop variable is now: hippo</code></pre>
</div>
<p>We are not asking Python to print the value of the loop variable
anymore, but the for loop still runs and the value of
<code>creature</code> changes on each pass through the loop. The
statement <code>pass</code> in the body of the loop means “do
nothing”.</p>
<div id="challenge---loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---loops" class="callout-inner">
<h3 class="callout-title">Challenge - Loops</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>What happens if we don’t include the <code>pass</code>
statement?</p></li>
<li><p>Rewrite the loop so that the animals are separated by commas, not
new lines (Hint: You can concatenate strings using a plus sign. For
example, <code>print(string1 + string2)</code> outputs
‘string1string2’).</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>IndentationError: expected an indented block</code></pre>
</div>
</li>
<li>
<p>Using the <code>end</code> argument to <code>print</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="bu">print</span>(creature <span class="op">+</span> <span class="st">','</span>, end<span class="op">=</span><span class="st">''</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>lion,tiger,crocodile,vulture,hippo,</code></pre>
</div>
<p>This puts a comma on the end of the list, which is not ideal. To
avoid this, we need to use an altogether different approach: string
objects in Python have a <code>join</code> method, which can be used to
concatenate items in a list with the string in between, e.g.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">', '</span>.join(animals)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'lion, tiger, crocodile, vulture, hippo'</span></span></code></pre>
</div>
</li>
</ol></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="automating-data-processing-using-for-loops">Automating data processing using For Loops<a class="anchor" aria-label="anchor" href="#automating-data-processing-using-for-loops"></a></h2>
<hr class="half-width"><p>The file we’ve been using so far, <code>surveys.csv</code>, contains
25 years of data and is very large. We would like to separate the data
for each year into a separate file.</p>
<p>Let’s start by making a new directory inside the folder
<code>data</code> to store all of these files using the module
<code>os</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>os.mkdir(<span class="st">'data/yearly_files'</span>)</span></code></pre>
</div>
<p>The command <code>os.mkdir</code> is equivalent to <code>mkdir</code>
in the shell. Just so we are sure, we can check that the new directory
was created within the <code>data</code> folder:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>os.listdir(<span class="st">'data'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['plots.csv',
 'portal_mammals.sqlite',
 'species.csv',
 'survey2001.csv',
 'survey2002.csv',
 'surveys.csv',
 'surveys2002_temp.csv',
 'yearly_files']</code></pre>
</div>
<p>The command <code>os.listdir</code> is equivalent to <code>ls</code>
in the shell.</p>
<p>In previous lessons, we saw how to use the library pandas to load the
species data into memory as a DataFrame, how to select a subset of the
data using some criteria, and how to write the DataFrame into a CSV
file. Let’s write a script that performs those three steps in sequence
for the year 2002:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co"># Select only data for the year 2002</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>surveys2002 <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> <span class="dv">2002</span>]</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co"># Write the new DataFrame to a CSV file</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>surveys2002.to_csv(<span class="st">'data/yearly_files/surveys2002.csv'</span>)</span></code></pre>
</div>
<p>To create yearly data files, we could repeat the last two commands
over and over, once for each year of data. Repeating code is neither
elegant nor practical, and is very likely to introduce errors into your
code. We want to turn what we’ve just written into a loop that repeats
the last two commands for every year in the dataset.</p>
<p>Let’s start by writing a loop that prints the names of the files we
want to create - the dataset we are using covers 1977 through 2002, and
we’ll create a separate file for each of those years. Listing the
filenames is a good way to confirm that the loop is behaving as we
expect.</p>
<p>We have seen that we can loop over a list of items, so we need a list
of years to loop over. We can get the years in our DataFrame with:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>surveys_df[<span class="st">'year'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0        1977
1        1977
2        1977
3        1977
         ...
35545    2002
35546    2002
35547    2002
35548    2002</code></pre>
</div>
<p>but we want only unique years, which we can get using the
<code>unique</code> method which we have already seen.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>surveys_df[<span class="st">'year'</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987,
       1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
       1999, 2000, 2001, 2002], dtype=int64)</code></pre>
</div>
<p>Putting this into our for loop we get</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> surveys_df[<span class="st">'year'</span>].unique():</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>   filename<span class="op">=</span><span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>   <span class="bu">print</span>(filename)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1977.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1978.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1979.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1980.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1981.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1982.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1983.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1984.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1985.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1986.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1987.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1988.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1989.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1990.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1991.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1992.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1993.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1994.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1995.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1996.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1997.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1998.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1999.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2000.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2001.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2002.csv</span></span></code></pre>
</div>
<p>We can now add the rest of the steps we need to create separate text
files:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> surveys_df[<span class="st">'year'</span>].unique():</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>    surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year]</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a CSV file</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>    surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>Look inside the <code>yearly_files</code> directory and check a
couple of the files you just created to confirm that everything worked
as expected.</p>
</section><section><h2 class="section-heading" id="writing-unique-file-names">Writing Unique File Names<a class="anchor" aria-label="anchor" href="#writing-unique-file-names"></a></h2>
<hr class="half-width"><p>Notice that the code above created a unique filename for each
year.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>filename <span class="op">=</span> <span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span></code></pre>
</div>
<p>Let’s break down the parts of this name:</p>
<ul><li>The first part is some text that specifies the directory to store
our data file in (data/yearly_files/) and the first part of the file
name (surveys): <code>'data/yearly_files/surveys'</code>
</li>
<li>We can concatenate this with the value of a variable, in this case
<code>year</code> by using the plus <code>+</code> sign and the variable
we want to add to the file name: <code>+ str(year)</code>
</li>
<li>Then we add the file extension as another text string:
<code>+ '.csv'</code>
</li>
</ul><p>Notice that we use single quotes to add text strings. The variable is
not surrounded by quotes. This code produces the string
<code>data/yearly_files/surveys2002.csv</code> which contains the path
to the new filename AND the file name itself.</p>
<div id="challenge---modifying-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---modifying-loops" class="callout-inner">
<h3 class="callout-title">Challenge - Modifying loops</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>Some of the surveys you saved are missing data (they have null
values that show up as NaN - Not A Number - in the DataFrames and do not
show up in the text files). Modify the for loop so that the entries with
null values are not included in the yearly files.</p></li>
<li><p>Let’s say you only want to look at data from a given multiple of
years. How would you modify your loop in order to generate a data file
for only every 5th year, starting from 1977?</p></li>
<li><p>Instead of splitting out the data by years, a colleague wants to
do analyses each species separately. How would you write a unique CSV
file for each species?</p></li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li><div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year].dropna()</span></code></pre>
</div></li>
<li>
<p>You could just make a list manually, however, why not check the
first and last year making use of the code itself?</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>n_year <span class="op">=</span> <span class="dv">5</span>  <span class="co"># better overview by making variable from it</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>first_year <span class="op">=</span> surveys_df[<span class="st">'year'</span>].<span class="bu">min</span>()</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>last_year <span class="op">=</span> surveys_df[<span class="st">'year'</span>].<span class="bu">max</span>()</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(first_year, last_year, n_year):</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>    <span class="bu">print</span>(year)</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>    surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year].dropna()</span></code></pre>
</div>
</li>
<li><div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="cf">for</span> species <span class="kw">in</span> surveys_df[<span class="st">'species_id'</span>].dropna().unique():</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    surveys_species <span class="op">=</span> surveys_df[surveys_df.species_id <span class="op">==</span> species]</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'episodes/data/species_files/surveys'</span> <span class="op">+</span> species <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    surveys_species.to_csv(filename)</span></code></pre>
</div></li>
</ol></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="building-reusable-and-modular-code-with-functions">Building reusable and modular code with functions<a class="anchor" aria-label="anchor" href="#building-reusable-and-modular-code-with-functions"></a></h2>
<hr class="half-width"><p>Suppose that separating large data files into individual yearly files
is a task that we frequently have to perform. We could write a
<strong>for loop</strong> like the one above every time we needed to do
it but that would be time consuming and error prone. A more elegant
solution would be to create a reusable tool that performs this task with
minimum input from the user. To do this, we are going to turn the code
we’ve already written into a function.</p>
<p>Functions are reusable, self-contained pieces of code that are called
with a single command. They can be designed to accept arguments as input
and return values, but they don’t need to do either. Variables declared
inside functions only exist while the function is running and if a
variable within the function (a local variable) has the same name as a
variable somewhere else in the code, the local variable hides but
doesn’t overwrite the other.</p>
<p>Every method used in Python (for example, <code>print</code>) is a
function, and the libraries we import (say, <code>pandas</code>) are a
collection of functions. We will only use functions that are housed
within the same code that uses them, but we can also write functions
that can be used by different programs.</p>
<p>Functions are declared following this general structure:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>    <span class="co"># The body of the function is indented</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>    <span class="co"># This function prints the two arguments to screen</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>    </span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>    <span class="co"># And returns their product</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span></code></pre>
</div>
<p>The function declaration starts with the word <code>def</code>,
followed by the function name and any arguments in parenthesis, and ends
in a colon. The body of the function is indented just like loops are. If
the function returns something when it is called, it includes a return
statement at the end.</p>
<p>This is how we call the function:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 2 5 (this is done inside the function!)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Their product is:'</span>, product_of_inputs, <span class="st">'(this is done outside the function!)'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Their product is: 10 (this is done outside the function!)</code></pre>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>When teaching the challenge below, demonstrating the results in a
debugging environment can make function scope more clear.</p>
</div>
</div>
</div>
</div>
<div id="challenge---functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---functions" class="callout-inner">
<h3 class="callout-title">Challenge - Functions</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Change the values of the arguments provided to the function and
check its output</li>
<li>Try calling the function by giving it the wrong number of arguments
(not 2) or not assigning the function call to a variable (no
<code>product_of_inputs =</code>)</li>
<li>Declare a variable inside the function and test to see where it
exists (Hint: can you print it from outside the function?)</li>
<li>Explore what happens when a variable both inside and outside the
function have the same name. What happens to the global variable when
you change the value of the local variable?</li>
</ol></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>
<p>For example, using an integer and a string:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">3</span>, <span class="st">'clap'</span>)</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="bu">print</span>(product_of_inputs)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 3 clap (this is done inside the function!)
clapclapclap</code></pre>
</div>
</li>
<li>
<p>For example, providing a third integer argument:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">3</span>, <span class="dv">18</span>, <span class="dv">33</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>TypeError: this_is_the_function_name() takes 2 positional arguments but 3 were given</code></pre>
</div>
<p>and proving the correct number of arguments but not capturing the
return value in a variable:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>this_is_the_function_name(<span class="dv">23</span>, <span class="dv">108</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 23 108 (this is done inside the function!)
2484</code></pre>
</div>
</li>
<li>
<p>An example looking at variables defined outside and inside the
function. Note that the explanatory comments have been removed from the
function definition.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>var_defined_outside <span class="op">=</span> <span class="st">'outside'</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>    var_defined_inside <span class="op">=</span> <span class="st">'inside'</span></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'This variable was created '</span> <span class="op">+</span> var_defined_outside <span class="op">+</span> <span class="st">' the function'</span>)</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>this_is_the_function_name(<span class="fl">3.3</span>, <span class="fl">7.9</span>)</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'This variable was created'</span> <span class="op">+</span> var_defined_inside <span class="op">+</span> <span class="st">' the function'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 3.3 7.9 (this is done inside the function!)
This variable was created outside the function
26.07</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>NameError: name 'var_defined_inside' is not defined</code></pre>
</div>
<p>We can see from these results that variables defined outside the
function are available for use inside them, while variables defined
inside a function are not available outside them.</p>
</li>
<li>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>shared_variable_name <span class="op">=</span> <span class="st">'who would I be'</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a>    shared_variable_name <span class="op">=</span> <span class="st">'without you'</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a><span class="bu">print</span>(shared_variable_name)</span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a>this_is_the_function_name(<span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># does calling the function change the variable's value?</span></span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a><span class="bu">print</span>(shared_variable_name)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>who would I be
The function arguments are: 2 3 (this is done inside the function!)
6
who would I be</code></pre>
</div>
<p>And what about if we modify the variable inside the function?</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>    shared_variable_name <span class="op">=</span> <span class="st">'without you'</span></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>    shared_variable_name <span class="op">=</span> shared_variable_name <span class="op">+</span> <span class="st">', without them?'</span></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>    <span class="bu">print</span>(shared_variable_name)</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a>this_is_the_function_name(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a><span class="bu">print</span>(shared_variable_name)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>without you, without them?
The function arguments are: 2 3 (this is done inside the function!)
6
who would I be</code></pre>
</div>
</li>
</ol></div>
</div>
</div>
</div>
<p>We can now turn our code for saving yearly data files into a
function. There are many different “chunks” of this code that we can
turn into functions, and we can even create functions that call other
functions inside them. Let’s first write a function that separates data
for just one year and saves that data to a file:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data):</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="co">    this_year -- year for which data is extracted</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/function_surveys'</span> <span class="op">+</span> <span class="bu">str</span>(this_year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a>    surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>The text between the two sets of triple double quotes is called a
docstring and contains the documentation for the function. It does
nothing when the function is running and is therefore not necessary, but
it is good practice to include docstrings as a reminder of what the code
does. Docstrings in functions also become part of their ‘official’
documentation, and we can see them by typing
<code>help(function_name)</code>:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="bu">help</span>(one_year_csv_writer)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on function one_year_csv_writer in module __main__:

one_year_csv_writer(this_year, all_data)
    Writes a csv file for data from a given year.
    this_year -- year for which data is extracted
    all_data -- DataFrame with multi-year data</code></pre>
</div>
<p>Or, when working in the Jupyter environment, adding a <code>?</code>
(question mark) after the function name:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>one_year_csv_writer?</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>one_year_csv_writer(<span class="dv">2002</span>, surveys_df)</span></code></pre>
</div>
<p>We changed the root of the name of the CSV file so we can distinguish
it from the one we wrote before. Check the <code>yearly_files</code>
directory for the file. Did it do what you expect?</p>
<p>What we really want to do, though, is create files for multiple years
without having to request them one by one. Let’s write another function
that replaces the entire <code>for</code> loop by looping through a
sequence of years and repeatedly calling the function we just wrote,
<code>one_year_csv_writer</code>:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(start_year, end_year, all_data):</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a><span class="co">    Writes separate CSV files for each year of data.</span></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want</span></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>    <span class="co"># "end_year" is the last year of data we want to pull, so we loop to end_year+1</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a>        one_year_csv_writer(year, all_data)</span></code></pre>
</div>
<p>Because people will naturally expect that the end year for the files
is the last year with data, the for loop inside the function ends at
<code>end_year + 1</code>. By writing the entire loop into a function,
we’ve made a reusable tool for whenever we need to break a large data
file into yearly files. Because we can specify the first and last year
for which we want files, we can even use this function to create files
for a subset of the years available. This is how we call this
function:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a><span class="co"># Create CSV files</span></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a>yearly_data_csv_writer(<span class="dv">1977</span>, <span class="dv">2002</span>, surveys_df)</span></code></pre>
</div>
<p>BEWARE! If you are using Jupyter Notebooks and you modify a function,
you MUST re-run that cell in order for the changed function to be
available to the rest of the code. Nothing will visibly happen when you
do this, though, because defining a function without <em>calling</em> it
doesn’t produce an output. Any cells that use the now-changed functions
will also have to be re-run for their output to change.</p>
<div id="challenge-more-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-more-functions" class="callout-inner">
<h3 class="callout-title">Challenge: More functions</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Add two arguments to the functions we wrote that take the path of
the directory where the files will be written and the root of the file
name. Create a new set of files with a different name in a different
directory.</li>
<li>How could you use the function <code>yearly_data_csv_writer</code>
to create a CSV file for only one year? (Hint: think about the syntax
for <code>range</code>)</li>
<li>Make the functions return a list of the files they have written.
There are many ways you can do this (and you should try them all!):
either of the functions can print to screen, either can use a return
statement to give back numbers or strings to their function call, or you
can use some combination of the two. You could also try using the
<code>os</code> library to list the contents of directories.</li>
<li>Explore what happens when variables are declared inside each of the
functions versus in the main (non-indented) body of your code. What is
the scope of the variables (where are they visible)? What happens when
they have the same name but are given different values?</li>
</ol></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li><div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save, root_name):</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a></span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb55-19"><a href="#cb55-19" tabindex="-1"></a></span>
<span id="cb55-20"><a href="#cb55-20" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb55-21"><a href="#cb55-21" tabindex="-1"></a>    filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb55-22"><a href="#cb55-22" tabindex="-1"></a>    surveys_year.to_csv(filename)</span>
<span id="cb55-23"><a href="#cb55-23" tabindex="-1"></a></span>
<span id="cb55-24"><a href="#cb55-24" tabindex="-1"></a>start_year <span class="op">=</span> <span class="dv">1978</span></span>
<span id="cb55-25"><a href="#cb55-25" tabindex="-1"></a>end_year <span class="op">=</span> <span class="dv">2000</span></span>
<span id="cb55-26"><a href="#cb55-26" tabindex="-1"></a>directory_name <span class="op">=</span> <span class="st">'different_directory'</span></span>
<span id="cb55-27"><a href="#cb55-27" tabindex="-1"></a>root_file_name <span class="op">=</span> <span class="st">'different_file_name'</span></span>
<span id="cb55-28"><a href="#cb55-28" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb55-29"><a href="#cb55-29" tabindex="-1"></a>     one_year_csv_writer(year, surveys_df, directory_name, root_file_name)</span></code></pre>
</div></li>
<li><p><code>yearly_data_csv_writer(2000, 2000, surveys_df)</code></p></li>
<li>
<p>Building a list and returning it:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data):</span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="co">    this_year -- year for which data is extracted</span></span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/function_surveys'</span> <span class="op">+</span> <span class="bu">str</span>(this_year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a>    surveys_year.to_csv(filename)</span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a>    <span class="cf">return</span> filename</span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a></span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(start_year, end_year, all_data):</span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a><span class="co">    Writes separate CSV files for each year of data.</span></span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want</span></span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want</span></span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a></span>
<span id="cb56-26"><a href="#cb56-26" tabindex="-1"></a>    <span class="co"># "end_year" is the last year of data we want to pull, so we loop to end_year+1</span></span>
<span id="cb56-27"><a href="#cb56-27" tabindex="-1"></a>    output_files <span class="op">=</span> []</span>
<span id="cb56-28"><a href="#cb56-28" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb56-29"><a href="#cb56-29" tabindex="-1"></a>        output_files.append(one_year_csv_writer(year, all_data))</span>
<span id="cb56-30"><a href="#cb56-30" tabindex="-1"></a>    <span class="cf">return</span> output_files</span>
<span id="cb56-31"><a href="#cb56-31" tabindex="-1"></a></span>
<span id="cb56-32"><a href="#cb56-32" tabindex="-1"></a><span class="bu">print</span>(yearly_data_csv_writer(<span class="dv">2000</span>, <span class="dv">2001</span>, surveys_df))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['data/yearly_files/function_surveys2000.csv', 'data/yearly_files/function_surveys2001.csv']</code></pre>
</div>
</li>
</ol></div>
</div>
</div>
</div>
<p>The functions we wrote demand that we give them a value for every
argument. Ideally, we would like these functions to be as flexible and
independent as possible. Let’s modify the function
<code>yearly_data_csv_writer</code> so that the <code>start_year</code>
and <code>end_year</code> default to the full range of the data if they
are not supplied by the user. Arguments can be given default values with
an equal sign in the function declaration. Any arguments in the function
without default values (here, <code>all_data</code>) is a required
argument and MUST come before the argument with default values (which
are optional in the function call).</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year<span class="op">=</span><span class="dv">1977</span>, end_year<span class="op">=</span><span class="dv">2002</span>):</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="co">    Modified from yearly_data_csv_writer to test default argument values!</span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want (default 1977)</span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want (default 2002)</span></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both optional arguments:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a></span>
<span id="cb58-16"><a href="#cb58-16" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span>
<span id="cb58-17"><a href="#cb58-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Both optional arguments:	1988 1993
Default values:		1977 2002</code></pre>
</div>
<p>The “\t” in the <code>print</code> statements are tabs, used to make
the text align and be easier to read.</p>
<p>But what if our dataset doesn’t start in 1977 and end in 2002? We can
modify the function so that it looks for the start and end years in the
dataset if those dates are not provided:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year<span class="op">=</span><span class="va">None</span>, end_year<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a><span class="co">    Modified from yearly_data_csv_writer to test default argument values!</span></span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want, Check all_data! (default None)</span></span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want; Check all_data! (default None)</span></span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb60-14"><a href="#cb60-14" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb60-16"><a href="#cb60-16" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" tabindex="-1"></a></span>
<span id="cb60-18"><a href="#cb60-18" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb60-19"><a href="#cb60-19" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both optional arguments:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb60-20"><a href="#cb60-20" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span>
<span id="cb60-22"><a href="#cb60-22" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Both optional arguments:	1988 1993
Default values:		1977 2002</code></pre>
</div>
<p>The default values of the <code>start_year</code> and
<code>end_year</code> arguments in the function
<code>yearly_data_arg_test</code> are now <code>None</code>. This is a
built-in constant in Python that indicates the absence of a value -
essentially, that the variable exists in the namespace of the function
(the directory of variable names) but that it doesn’t correspond to any
existing object.</p>
<div id="challenge---variables" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---variables" class="callout-inner">
<h3 class="callout-title">Challenge - Variables</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>What type of object corresponds to a variable declared as
<code>None</code>? (Hint: create a variable set to <code>None</code> and
use the function <code>type()</code>)</li>
<li>Compare the behavior of the function
<code>yearly_data_arg_test</code> when the arguments have
<code>None</code> as a default and when they do not have default
values.</li>
<li>What happens if you only include a value for <code>start_year</code>
in the function call? Can you write the function call with only a value
for <code>end_year</code>? (Hint: think about how the function must be
assigning values to each of the arguments - this is related to the need
to put the arguments without default values before those with default
values in the function definition!)</li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>nothing <span class="op">=</span> <span class="va">None</span></span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a><span class="bu">type</span>(nothing)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NoneType</span></span></code></pre>
</div>
</li>
<li>
<p>Removing <code>None</code> as the default value for the
<code>start_year</code> and <code>end_year</code> parameters results in
a <code>TypeError</code> because the function now expects three
arguments to be provided:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year, end_year):</span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a><span class="co">    Modified from yearly_data_csv_writer to test default argument values!</span></span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want, Check all_data! (default None)</span></span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want; Check all_data! (default None)</span></span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb64-9"><a href="#cb64-9" tabindex="-1"></a></span>
<span id="cb64-10"><a href="#cb64-10" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb64-11"><a href="#cb64-11" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb64-12"><a href="#cb64-12" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb64-13"><a href="#cb64-13" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb64-14"><a href="#cb64-14" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb64-16"><a href="#cb64-16" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>TypeError: yearly_data_arg_test() missing 2 required positional arguments: 'start_year' and 'end_year'</code></pre>
</div>
</li>
<li>
<p>Returning to the original definition of the function (i.e. with
the default <code>None</code> values):</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>yearly_data_arg_test(surveys_df, <span class="dv">1985</span>) <span class="co"># providing only the start year</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(1985, 2002)</code></pre>
</div>
<p>If we want to provide only the end year, we have to name the
arguments:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>yearly_data_arg_test(surveys_df, end_year<span class="op">=</span><span class="dv">1985</span>) <span class="co"># providing only the start year</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(1977, 1985)</code></pre>
</div>
</li>
</ol></div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="if-statements">If Statements<a class="anchor" aria-label="anchor" href="#if-statements"></a></h2>
<hr class="half-width"><p>The body of the test function now has two conditionals (if
statements) that check the values of <code>start_year</code> and
<code>end_year</code>. If statements execute a segment of code when some
condition is met. They commonly look something like this:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a><span class="cf">if</span> a<span class="op">&lt;</span><span class="dv">0</span>:  <span class="co"># Meets first condition?</span></span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a></span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>    <span class="co"># if a IS less than zero</span></span>
<span id="cb70-6"><a href="#cb70-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a is a negative number'</span>)</span>
<span id="cb70-7"><a href="#cb70-7" tabindex="-1"></a></span>
<span id="cb70-8"><a href="#cb70-8" tabindex="-1"></a><span class="cf">elif</span> a<span class="op">&gt;</span><span class="dv">0</span>:  <span class="co"># Did not meet first condition. meets second condition?</span></span>
<span id="cb70-9"><a href="#cb70-9" tabindex="-1"></a></span>
<span id="cb70-10"><a href="#cb70-10" tabindex="-1"></a>    <span class="co"># if a ISN'T less than zero and IS more than zero</span></span>
<span id="cb70-11"><a href="#cb70-11" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a is a positive number'</span>)</span>
<span id="cb70-12"><a href="#cb70-12" tabindex="-1"></a></span>
<span id="cb70-13"><a href="#cb70-13" tabindex="-1"></a><span class="cf">else</span>:  <span class="co"># Met neither condition</span></span>
<span id="cb70-14"><a href="#cb70-14" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" tabindex="-1"></a>    <span class="co"># if a ISN'T less than zero and ISN'T more than zero</span></span>
<span id="cb70-16"><a href="#cb70-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a must be zero!'</span>)</span></code></pre>
</div>
<p>Which would return:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a is a positive number</code></pre>
</div>
<p>Change the value of <code>a</code> to see how this function works.
The statement <code>elif</code> means “else if”, and all of the
conditional statements must end in a colon.</p>
<p>The if statements in the function <code>yearly_data_arg_test</code>
check whether there is an object associated with the variable names
<code>start_year</code> and <code>end_year</code>. If those variables
are <code>None</code>, the if statements return the boolean
<code>True</code> and execute whatever is in their body. On the other
hand, if the variable names are associated with some value (they got a
number in the function call), the if statements return
<code>False</code> and do not execute. The opposite conditional
statements, which would return <code>True</code> if the variables were
associated with objects (if they had received value in the function
call), would be <code>if start_year</code> and
<code>if end_year</code>.</p>
<p>As we’ve written it so far, the function
<code>yearly_data_arg_test</code> associates values in the function call
with arguments in the function definition just based on their order. If
the function gets only two values in the function call, the first one
will be associated with <code>all_data</code> and the second with
<code>start_year</code>, regardless of what we intended them to be. We
can get around this problem by calling the function using keyword
arguments, where each of the arguments in the function definition is
associated with a keyword and the function call passes values to the
function using these keywords:</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'No keywords:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-6"><a href="#cb72-6" tabindex="-1"></a></span>
<span id="cb72-7"><a href="#cb72-7" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, start_year<span class="op">=</span><span class="dv">1988</span>, end_year<span class="op">=</span><span class="dv">1993</span>)</span>
<span id="cb72-8"><a href="#cb72-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both keywords, in order:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-9"><a href="#cb72-9" tabindex="-1"></a></span>
<span id="cb72-10"><a href="#cb72-10" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, end_year<span class="op">=</span><span class="dv">1993</span>, start_year<span class="op">=</span><span class="dv">1988</span>)</span>
<span id="cb72-11"><a href="#cb72-11" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both keywords, flipped:</span><span class="ch">\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-12"><a href="#cb72-12" tabindex="-1"></a></span>
<span id="cb72-13"><a href="#cb72-13" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, start_year<span class="op">=</span><span class="dv">1988</span>)</span>
<span id="cb72-14"><a href="#cb72-14" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'One keyword, default end:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-15"><a href="#cb72-15" tabindex="-1"></a></span>
<span id="cb72-16"><a href="#cb72-16" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, end_year<span class="op">=</span><span class="dv">1993</span>)</span>
<span id="cb72-17"><a href="#cb72-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'One keyword, default start:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Default values:		1977 2002
No keywords:		1988 1993
Both keywords, in order:	1988 1993
Both keywords, flipped:	1988 1993
One keyword, default end:	1988 2002
One keyword, default start:	1977 1993</code></pre>
</div>
<div id="challenge---modifying-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge---modifying-functions" class="callout-inner">
<h3 class="callout-title">Challenge - Modifying functions</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li><p>Rewrite the <code>one_year_csv_writer</code> and
<code>yearly_data_csv_writer</code> functions to have keyword arguments
with default values</p></li>
<li><p>Modify the functions so that they don’t create yearly files if
there is no data for a given year and display an alert to the user
(Hint: use conditional statements to do this. For an extra challenge,
use <code>try</code> statements!)</p></li>
<li>
<p>The code below checks to see whether a directory exists and
creates one if it doesn’t. Add some code to your function that writes
out the CSV files, to check for a directory to write to.</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="cf">if</span> <span class="st">'dir_name_here'</span> <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Processed directory exists'</span>)</span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a>    os.mkdir(<span class="st">'dir_name_here'</span>)</span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span></code></pre>
</div>
</li>
<li><p>The code that you have written so far to loop through the years
is good, however it is not necessarily reproducible with different
datasets. For instance, what happens to the code if we have additional
years of data in our CSV files? Using the tools that you learned in the
previous activities, make a list of all years represented in the data.
Then create a loop to process your data, that begins at the earliest
year and ends at the latest year using that list.</p></li>
</ol><p>HINT: you can create a loop with a list as follows:
<code>for years in year_list:</code></p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<ol style="list-style-type: decimal"><li><div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb75-6"><a href="#cb75-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb75-7"><a href="#cb75-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb75-8"><a href="#cb75-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb75-9"><a href="#cb75-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb75-10"><a href="#cb75-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb75-11"><a href="#cb75-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb75-12"><a href="#cb75-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb75-13"><a href="#cb75-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb75-14"><a href="#cb75-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb75-15"><a href="#cb75-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb75-16"><a href="#cb75-16" tabindex="-1"></a></span>
<span id="cb75-17"><a href="#cb75-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb75-18"><a href="#cb75-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb75-19"><a href="#cb75-19" tabindex="-1"></a></span>
<span id="cb75-20"><a href="#cb75-20" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb75-21"><a href="#cb75-21" tabindex="-1"></a>    filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb75-22"><a href="#cb75-22" tabindex="-1"></a>    surveys_year.to_csv(filename)</span>
<span id="cb75-23"><a href="#cb75-23" tabindex="-1"></a></span>
<span id="cb75-24"><a href="#cb75-24" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(all_data, start_year<span class="op">=</span><span class="va">None</span>, end_year<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb75-25"><a href="#cb75-25" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb75-26"><a href="#cb75-26" tabindex="-1"></a><span class="co">    Writes separate CSV files for each year of data.</span></span>
<span id="cb75-27"><a href="#cb75-27" tabindex="-1"></a></span>
<span id="cb75-28"><a href="#cb75-28" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want</span></span>
<span id="cb75-29"><a href="#cb75-29" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want</span></span>
<span id="cb75-30"><a href="#cb75-30" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb75-31"><a href="#cb75-31" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb75-32"><a href="#cb75-32" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb75-33"><a href="#cb75-33" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb75-34"><a href="#cb75-34" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb75-35"><a href="#cb75-35" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb75-36"><a href="#cb75-36" tabindex="-1"></a>    <span class="co"># "end_year" is the last year of data we want to pull, so we loop to end_year+1</span></span>
<span id="cb75-37"><a href="#cb75-37" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb75-38"><a href="#cb75-38" tabindex="-1"></a>        one_year_csv_writer(year, all_data)</span></code></pre>
</div></li>
<li><div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb76-2"><a href="#cb76-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb76-3"><a href="#cb76-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb76-4"><a href="#cb76-4" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb76-6"><a href="#cb76-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb76-7"><a href="#cb76-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb76-8"><a href="#cb76-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb76-9"><a href="#cb76-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb76-10"><a href="#cb76-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb76-11"><a href="#cb76-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb76-12"><a href="#cb76-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb76-13"><a href="#cb76-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb76-14"><a href="#cb76-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb76-15"><a href="#cb76-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb76-16"><a href="#cb76-16" tabindex="-1"></a></span>
<span id="cb76-17"><a href="#cb76-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb76-18"><a href="#cb76-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb76-19"><a href="#cb76-19" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(surveys_year) <span class="op">==</span> <span class="dv">0</span>: <span class="co"># 'if not len(surveys_year):' will also work </span></span>
<span id="cb76-20"><a href="#cb76-20" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'no data available for '</span> <span class="op">+</span> this_year <span class="op">+</span> <span class="st">', output file not created'</span>)</span>
<span id="cb76-21"><a href="#cb76-21" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb76-22"><a href="#cb76-22" tabindex="-1"></a>        <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb76-23"><a href="#cb76-23" tabindex="-1"></a>        filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb76-24"><a href="#cb76-24" tabindex="-1"></a>        surveys_year.to_csv(filename)</span></code></pre>
</div></li>
<li>
<p>The solution below uses <code>not</code> to invert the check for
the directory, so a message is printed one time at most i.e. when the
directory is created:</p>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb77-11"><a href="#cb77-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb77-12"><a href="#cb77-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb77-13"><a href="#cb77-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb77-14"><a href="#cb77-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb77-15"><a href="#cb77-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb77-16"><a href="#cb77-16" tabindex="-1"></a></span>
<span id="cb77-17"><a href="#cb77-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb77-18"><a href="#cb77-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb77-19"><a href="#cb77-19" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(surveys_year) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb77-20"><a href="#cb77-20" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'no data available for '</span> <span class="op">+</span> this_year <span class="op">+</span> <span class="st">', output file not created'</span>)</span>
<span id="cb77-21"><a href="#cb77-21" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb77-22"><a href="#cb77-22" tabindex="-1"></a>        <span class="cf">if</span> folder_to_save <span class="kw">not</span> <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb77-23"><a href="#cb77-23" tabindex="-1"></a>            os.mkdir(folder_to_save)</span>
<span id="cb77-24"><a href="#cb77-24" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span>
<span id="cb77-25"><a href="#cb77-25" tabindex="-1"></a>        <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb77-26"><a href="#cb77-26" tabindex="-1"></a>        filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb77-27"><a href="#cb77-27" tabindex="-1"></a>        surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>The equivalent, without using <code>not</code> to invert the
conditional, would be:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="cf">if</span> folder_to_save <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a>    os.mkdir(folder_to_save)</span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span></code></pre>
</div>
</li>
<li><div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(all_data, yearcolumn<span class="op">=</span><span class="st">"year"</span>,</span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a>                           folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb79-4"><a href="#cb79-4" tabindex="-1"></a><span class="co">    Writes separate csv files for each year of data.</span></span>
<span id="cb79-5"><a href="#cb79-5" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" tabindex="-1"></a><span class="co">    all_data --- DataFrame with multi-year data</span></span>
<span id="cb79-7"><a href="#cb79-7" tabindex="-1"></a><span class="co">    yearcolumn --- column name containing the year of the data</span></span>
<span id="cb79-8"><a href="#cb79-8" tabindex="-1"></a><span class="co">    folder_to_save --- folder name to store files</span></span>
<span id="cb79-9"><a href="#cb79-9" tabindex="-1"></a><span class="co">    root_name --- start of the file names stored</span></span>
<span id="cb79-10"><a href="#cb79-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb79-11"><a href="#cb79-11" tabindex="-1"></a>    years <span class="op">=</span> all_data[yearcolumn].unique()</span>
<span id="cb79-12"><a href="#cb79-12" tabindex="-1"></a>    filenames <span class="op">=</span> []</span>
<span id="cb79-13"><a href="#cb79-13" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> years:</span>
<span id="cb79-14"><a href="#cb79-14" tabindex="-1"></a>        filenames.append(one_year_csv_writer(year, all_data, folder_to_save, root_name))</span>
<span id="cb79-15"><a href="#cb79-15" tabindex="-1"></a>    <span class="cf">return</span> filenames</span></code></pre>
</div></li>
</ol></div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Loops help automate repetitive tasks over sets of items.</li>
<li>Loops combined with functions provide a way to process data more
efficiently than we could by hand.</li>
<li>Conditional statements enable execution of different operations on
different data.</li>
<li>Functions enable code reuse.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/05-merging-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/05-merging-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Combining DataFrames
        </a>
        <a class="chapter-link float-end" href="../instructor/07-visualization-ggplot-python.html" rel="next">
          Next: Making Plots With...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/06-loops-and-functions.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/datacarpentry/python-ecology-lesson/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/datacarpentry/python-ecology-lesson/" class="external-link">Source</a></p>
				<p><a href="https://github.com/datacarpentry/python-ecology-lesson/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://datacarpentry.github.io/python-ecology-lesson/instructor/06-loops-and-functions.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Data Workflows and Automation",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.github.io/python-ecology-lesson/instructor/06-loops-and-functions.html",
  "identifier": "https://datacarpentry.github.io/python-ecology-lesson/instructor/06-loops-and-functions.html",
  "dateCreated": "2015-03-19",
  "dateModified": "2023-05-18",
  "datePublished": "2025-04-29"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

